Программа для написания кода на ассемблере, который будет в дальшейшем использоваться на компьютере, построенным в факторио. Имеет встроенный компилятор и интерпритатор.  
[Посмотреть наработки факторио](FactorioComputerSimulator/Factorio.md)

# Компиляция
Каждая команда состоит из 2 байт + дополнительно выделенная память для аргументов.  
Информация о команде:
- 8 бит - команда (2^8 = 256 возможных команд)  
- 2 бит - тип команды  
- 3 бит - дополнительно выделенная память  
- 3 бит - пустые (возмона дальшейшая модификация команды)

Запись:
CCCCCCCC TTDDDPPP
- C - команла.
- T - тип команды.
- D - количество дополнительный байт.
- P - пустые биты.

# Интерпритация
Класс интерпритатора принимает на вход уже скомпилированные команды. Далее скомпилированные команды прогонятся через цикл и выполняются последовательно.  
1) Интерпритатор ищет команду, id которой равен первым 8 бит скомпилированной команды.
2) Через id происходит получение доступа к обработчику.
3) Затем выполняется обработка команды (запуск её метода).

# Регистры
1) A - арифметический регистр.
   Используется для арифметических операций, не реализующих полный функционал. Все арифметические операции, не указывающие на другой регистр, записывают резаультат в регистр A.
3) L - логический регистр.
   Используется для операция сравнения, не реализующих полный функционал. Все логические операции, не указывающие на другой регистр, записывают резаультат в регистр L.
4) M - регистр памти.
   Используется для операция сравнения, не реализующих полный функционал. Операции для записии и чтения, не указывающие на другой регистр, записывают резаультат в регистр M.
6) H, K - регистры индекса оперативной памяти.
   H - старший регистр.  
   K - младший регистр.  
   Запись в двоичном формате: HHHHHHHH_KKKKKKKK
8) J - регистр сравнений.
   Используется для операция сравнения, не реализующих полный функционал.
9) B, C, D, E - дополнительные регистры  .
   Регистры используещиеся для временного хранения данных или использования.

# Команды

## Арифметика

### add
Id команды: 0.  
Выполняет сложение значений и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | A + const    | add 5         |
| 1           | A + reg      | add B         |
| 2           | reg + const  | add B, 5      |
| 3           | reg + reg    | add B, C      |

### sub
Id команды: 1.  
Выполняет вычитание значений и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | A - const    | sub 5         |
| 1           | A - reg      | sub B         |
| 2           | reg - const  | sub B, 5      |
| 3           | reg - reg    | sub B, C      |

### mul
Id команды: 2.  
Выполняет умножение значений и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | A * const    | mul 5         |
| 1           | A * reg      | mul B         |
| 2           | reg * const  | mul B, 5      |
| 3           | reg * reg    | mul B, C      |

### div
Id команды: 3.  
Выполняет операцию деления и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | A / const    | div 5         |
| 1           | A / reg      | div B         |
| 2           | reg / const  | div B, 5      |
| 3           | reg / reg    | div B, C      |

### inc
Id команды: 4.  
Увеличивает значение регистра на 1.
| Тип команды | Тип операции | Пример записи  |
|-------------|--------------|----------------|
| 0           | A + 1        | inc            |
| 1           | reg + 1      | inc B          |

### dec
Id команды: 5.  
Уменьшает значение регистра на 1.
| Тип команды | Тип операции | Пример записи  |
|-------------|--------------|-----------------|
| 0           | A - 1        | dec             |
| 1           | reg - 1      | dec B           |

## Логика

### and
Id команды: 6.  
Выполняет побитовое «И» двух операндов и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | L & const    | and 5         |
| 1           | L & reg      | and B         |
| 2           | reg & const  | and B, 5      |
| 3           | reg & reg    | and B, C      |

### or
Id команды: 7.  
Выполняет побитовое «ИЛИ» двух операндов и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | L \| const   | or 5          |
| 1           | L \| reg     | or B          |
| 2           | reg \| const | or B, 5       |
| 3           | reg \| reg   | or B, C       |

### xor
Id команды: 8.  
Выполняет побитовое «Исключающее ИЛИ» двух операндов и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | L ^ const    | xor 5         |
| 1           | L ^ reg      | xor B         |
| 2           | reg ^ const  | xor B, 5      |
| 3           | reg ^ reg    | xor B, C      |

### not
Id команды: 8.  
Выполняет побитовое отрицание (инверсию) операнда и сохраняет результат в регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | ~L           | not           |
| 1           | ~reg         | not B         |

## Память
### mov
Id команды: 10.  
Копирует значение из одного регистра или константы в другой регистр.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | reg <- const | mov A, 5      |
| 1           | reg <- reg   | mov A, B      |

### load
Id команды: 11. 
Загружает значение из ячейки памяти в регистр.
| Тип команды | Тип операции              | Пример записи                   |
|-------------|---------------------------|---------------------------------|
| 0           | M <- RAM\[H_K\]           | load                            |
| 1           | M <- RAM\[const_const\]   | load 0b00000000, 0b10000011     |
| 2           | reg <- RAM\[H_K\]         | load B                          |
| 3           | reg <- RAM\[const_const\] | load B,  0b00000000, 0b10000011 |

### storage
Id команды: 12.  
Сохраняет значение из регистра в ячейку памяти.
| Тип команды | Тип операции              | Пример записи                      |
|-------------|---------------------------|------------------------------------|
| 0           | RAM\[H_K\] <- M           | storage                            |
| 1           | RAM\[const_const\] <- M   | storage 0b00000000, 0b10000011     |
| 2           | RAM\[H_K\] <- reg         | storage B                          |
| 3           | RAM\[const_const\] <- reg | storage B,  0b00000000, 0b10000011 |

## Переходы
### jmp
Id команды: 13.  
Безусловно переходит на адрес указанной метки.
| Тип команды | Тип операции | Пример записи |
|-------------|--------------|---------------|
| 0           | jmp -> metka | jmp b         |

### je
Id команды: 14.  
Переходит на метку, если два операнда **равны**.
| Тип команды | Тип операции              | Пример записи  |
|-------------|---------------------------|----------------|
| 0           | J == const -> jmp metka   | je 5, metka    |
| 1           | J == reg -> jmp metka     | je B, metka    |
| 2           | reg == const -> jmp metka | je B, 5, metka |
| 3           | reg == reg -> jmp metka   | je B, C, metka |

### jne
Id команды: 15.  
Переходит на метку, если два операнда **не равны**.
| Тип команды | Тип операции              | Пример записи   |
|-------------|---------------------------|-----------------|
| 0           | J != const -> jmp metka   | jne 5, metka    |
| 1           | J != reg -> jmp metka     | jne B, metka    |
| 2           | reg != const -> jmp metka | jne B, 5, metka |
| 3           | reg != reg -> jmp metka   | jen B, C, metka |

### jg
Id команды: 16.  
Переходит на метку, если первый операнд **больше второго**.
| Тип команды | Тип операции             | Пример записи  |
|-------------|--------------------------|----------------|
| 0           | J > const -> jmp metka   | jg 5, metka    |
| 1           | J > reg -> jmp metka     | jg B, metka    |
| 2           | reg > const -> jmp metka | jg B, 5, metka |
| 3           | reg > reg -> jmp metka   | jg B, C, metka |

### jl
Id команды: 17.  
Переходит на метку, если первый операнд **меньше** второго.
| Тип команды | Тип операции             | Пример записи  |
|-------------|--------------------------|----------------|
| 0           | J < const -> jmp metka   | jg 5, metka    |
| 1           | J < reg -> jmp metka     | jg B, metka    |
| 2           | reg < const -> jmp metka | jg B, 5, metka |
| 3           | reg < reg -> jmp metka   | jg B, C, metka |

### jge
Id команды: 18.  
Переходит на метку, если первый операнд **больше или равен** второму.
| Тип команды | Тип операции              | Пример записи   |
|-------------|---------------------------|-----------------|
| 0           | J >= const -> jmp metka   | jge 5, metka    |
| 1           | J >= reg -> jmp metka     | jge B, metka    |
| 2           | reg >= const -> jmp metka | jge B, 5, metka |
| 3           | reg >= reg -> jmp metka   | jge B, C, metka |

### jle
Id команды: 19.  
Переходит на метку, если первый операнд **меньше или равен** второму.
| Тип команды | Тип операции              | Пример записи   |
|-------------|---------------------------|-----------------|
| 0           | J <= const -> jmp metka   | jle 5, metka    |
| 1           | J <= reg -> jmp metka     | jle B, metka    |
| 2           | reg <= const -> jmp metka | jle B, 5, metka |
| 3           | reg <= reg -> jmp metka   | jle B, C, metka |

### loop
Id команды: 20.  
Уменьшает регистр C на 1; если C ≠ 0, переходит на указанную метку.
| Тип команды | Тип операции                 | Пример записи   |
|-------------|------------------------------|-----------------|
| 0           | C - 1 -> C != 0 -> jmp metka | loop metka      |

# Примеры

## Арифметика
```asm
add 5          // A = A + 5
add B          // A = A + B
add B, 5       // B = B + 5
add B, C       // B = B + C

sub 5          // A = A - 5
sub B          // A = A + B
sub B, 5       // B = B + 5
sub B, C       // B = B + C

mul 5          // A = A * 5
mul B          // A = A * B
mul B, 5       // B = B * 5
mul B, C       // B = B * C

div 5          // A = A / 5
div B          // A = A / B
div B, 5       // B = B / 5
div B, C       // B = B / C

inc            // A = A + 1
inc B          // B = B + 1

dec            // A = A - 1
dec B          // B = B - 1
``` 

## Логика
```asm
not       // L = ~L
not B     // B = ~B

and 5     // L = L & 5
or B      // L = L | B
xor C     // L = L ^ C

// Аналогично с арифметическими операциями, можно указать регистр
// в качестве первого аргумента.
```

## Память
```asm
mov A, B                           // A = B
mov A, 5                           // A = 5

load                               // M = storage\[H_K\]
load 0b00000000, 0b00000001        // M = storage\[const_const\]
load B                             // B = storage\[H_K\]
load B, 0b00000000, 0b00000001     // B = storage\[const_const\]

storage                            // storage\[H_K\] = M
storage 0b00000000, 0b00000001     // storage\[const_const\] = M
storage B                          // storage\[H_K\] = B
storage B, 0b00000000, 0b00000001  // storage\[const_const\] = B
```

## Переходы
```asm
jmp end

je 5, end          // J == 5 -> jmp end
je B, end          // J == B -> jmp end
je B, 5, end       // B == 5 -> jmp end
je B, C, end       // B == C -> jmp end

// Абсольтно такие же пораметры можно
// использовать для следующих команд:
jne 5, end
jg B, end
jge B, 5, end
jl B, C, end
jle A, 0, end

end:           // Метка
```

## Циклы
```asm
mov C, 10

loop1:

// Do something
// Цикл повториться 10 ращ

loop loop1
```
